<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>React App</title>
  </head>
  <body>
    <noscript>App Traductor para la ayuda en la comercialización de una florícola, espacialmente en el idioma inglés - español</noscript>
    <div id="root"></div>
    <script type="text/babel">
      const { useState } = React;

      const MainPage = () => {
        const [message, setMessage] = useState("");
        const [messages, setMessages] = useState([]);
        const [language, setLanguage] = useState("es");

        const handleInputChange = (event) => {
          setMessage(event.target.value);
        };

        const handleLanguageChange = (event) => {
          setLanguage(event.target.value);
        };

        const handleSendMessage = () => {
          if (message.trim() !== "") {
            setMessages([...messages, { text: message, sender: "user", language }]);
            setMessage(""); // Limpiar el campo después de enviar
            // Simular una respuesta del otro extremo
            setTimeout(() => {
              setMessages((prevMessages) => [
                ...prevMessages,
                { text: "Respuesta automática", sender: "other", language }
              ]);
            }, 1000);
          }
        };

        const activateTranslation = () => {
          alert('Sistema de traducción activado');
        };

        return (
          <div id="main-container">
            <h1 id="main-title">Traductor de mensajería instantánea de KEFLOWERS</h1>
            <p id="main-description">
              Los mensajes que se envían en esta plataforma son seguros y serán traducidos al instante.
            </p>

            <h2 id="message-input-title">Ingrese el mensaje a traducir</h2>
            <input 
              type="text" 
              id="message-input" 
              value={message} 
              onChange={handleInputChange} 
            />
            <br />
            <div>
              <label htmlFor="language-select">Seleccione el idioma:</label>
              <select 
                id="language-select" 
                value={language} 
                onChange={handleLanguageChange}
              >
                <option value="es">Español</option>
                <option value="en">Inglés</option>
                <option value="fr">Francés</option>
              </select>
            </div>
            <br />
            <button onClick={activateTranslation}>Sugerencia de Traducción</button>
            <br /><br />
            <button 
              id="send-button" 
              onClick={handleSendMessage}
            >
              Enviar
            </button>
            <div id="message-list">
              {messages.map((msg, index) => (
                <div key={index} className={`message ${msg.sender}`}>
                  {msg.text} ({msg.language})
                </div>
              ))}
            </div>
          </div>
        );
      }

      ReactDOM.render(
        <React.StrictMode>
          <MainPage />
        </React.StrictMode>,
        document.getElementById('root')
      );
    </script>
    <!-- Load React. -->
    <script src="https://unpkg.com/react/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom/umd/react-dom.development.js" crossorigin></script>

    <!-- Load Babel Compiler -->
    <script src="https://unpkg.com/babel-standalone/babel.min.js"></script>
  </body>
</html>
